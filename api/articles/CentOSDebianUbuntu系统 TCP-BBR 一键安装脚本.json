{"title":"【转载】CentOSDebianUbuntu系统 TCP-BBR 一键安装脚本","slug":"CentOSDebianUbuntu系统 TCP-BBR 一键安装脚本","date":"2018-03-31T08:34:25.000Z","updated":"2018-03-31T09:04:27.422Z","comments":true,"path":"api/articles/CentOSDebianUbuntu系统 TCP-BBR 一键安装脚本.json","photos":[],"link":"","excerpt":" [Figure] ","covers":["https://s1.ax1x.com/2018/03/31/9x0keU.jpg"],"content":"<p><img src=\"https://s1.ax1x.com/2018/03/31/9x0keU.jpg\" alt=\"9x0keU.jpg\"><br><a id=\"more\"></a></p>\n<h1 id=\"本脚本适用环境\"><a href=\"#本脚本适用环境\" class=\"headerlink\" title=\"本脚本适用环境\"></a>本脚本适用环境</h1><p>系统支持：CentOS 6+，Debian 7+，Ubuntu 12+</p>\n<p>虚拟技术：OpenVZ 以外的（KVM、Xen、VMware等）</p>\n<p>内存要求：≥128M</p>\n<p>日期　　：2017 年 01 月 13 日</p>\n<h1 id=\"关于本脚本\"><a href=\"#关于本脚本\" class=\"headerlink\" title=\"关于本脚本\"></a>关于本脚本</h1><p>本脚本已在 Vultr 上的 VPS 全部测试通过。<br>当脚本检测到 VPS 的虚拟方式为 OpenVZ 时，会提示错误，并自动退出安装。<br>某些服务商（如 Linode、DigitalOcean）可能需要首先将 VPS 配置为可自定义内核，然后 grub2 的配置才会生效。<br>脚本运行完重启发现开不了机的，打开 VPS 后台控制面板的 VNC, 开机卡在 grub 引导, 手动选择内核即可。<br>由于是使用最新版系统内核，最好请勿在生产环境安装，以免产生不可预测之后果。</p>\n<h1 id=\"使用方法\"><a href=\"#使用方法\" class=\"headerlink\" title=\"使用方法\"></a>使用方法</h1><p>使用root用户登录，运行以下命令：</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget -<span class=\"keyword\">N</span> --<span class=\"keyword\">no</span>-check-certificate http<span class=\"variable\">s:</span>//github.<span class=\"keyword\">com</span>/teddysun/across/raw/master/bbr.<span class=\"keyword\">sh</span> &amp;&amp; chmod +<span class=\"keyword\">x</span> bbr.<span class=\"keyword\">sh</span> &amp;&amp; bash bbr.<span class=\"keyword\">sh</span></span><br></pre></td></tr></table></figure>\n<p>安装完成后，脚本会提示需要重启 VPS，输入 y 并回车后重启。</p>\n<p>重启完成后，进入 VPS，验证一下是否成功安装最新内核并开启 TCP BBR，输入以下命令：</p>\n<pre><code>uname -r\n# 查看内核版本，含有 4.9.0 就表示 OK 了\n# ————————————\nsysctl net.ipv4.tcp_available_congestion_control\n# 返回值一般为：\n# net.ipv4.tcp_available_congestion_control = bbr cubic reno\n# ————————————\nsysctl net.ipv4.tcp_congestion_control\n# 返回值一般为：\n# net.ipv4.tcp_congestion_control = bbr\n# ————————————\nsysctl net.core.default_qdisc\n# 返回值一般为：\n# net.core.default_qdisc = fq\n# ————————————\nlsmod | grep bbr\n# 返回值有 tcp_bbr 模块即说明bbr已启动。\n</code></pre><h1 id=\"参考链接：\"><a href=\"#参考链接：\" class=\"headerlink\" title=\"参考链接：\"></a>参考链接：</h1><p><a href=\"https://github.com/google/bbr/blob/master/Documentation/bbr-quick-start.md\" target=\"_blank\" rel=\"noopener\">https://github.com/google/bbr/blob/master/Documentation/bbr-quick-start.md</a></p>\n<p><a href=\"http://elrepo.org/tiki/tiki-index.php\" target=\"_blank\" rel=\"noopener\">http://elrepo.org/tiki/tiki-index.php</a></p>\n<p><a href=\"http://kernel.ubuntu.com/~kernel-ppa/mainline/v4.9/\" target=\"_blank\" rel=\"noopener\">http://kernel.ubuntu.com/~kernel-ppa/mainline/v4.9/</a></p>\n<h1 id=\"更新日志：\"><a href=\"#更新日志：\" class=\"headerlink\" title=\"更新日志：\"></a>更新日志：</h1><p>2017 年 01 月 13 日</p>\n<p>1.更新 内核为 4.9.3。</p>\n<p>2017 年 01 月 09 日</p>\n<p>1.更新 内核为 4.9.1。</p>\n<p>其他BBR一键脚本：『原创』Debian/Ubuntu系统 TCP拥塞控制技术 ——TCP-BBR 一键安装脚本</p>\n<p>本文章转载自：<a href=\"https://teddysun.com/489.html\" target=\"_blank\" rel=\"noopener\">https://teddysun.com/489.html</a></p>\n","categories":[],"tags":[]}